<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <p1>入力モード：答えを入力する。ミスった時だけ答えが出る<br>
  確認モード：答えが分かったやつはOKを押して進む。分からないやつはキャンセル押すと答えが出る。（最後は改行しない）<br>
  テキストのルール：英単語＋半角スペース＋日本語訳＋改行 で一問<br>
  二回目以降はミスったものだけ問題になる。入力モードの後に確認モードやったりその逆でもそうなる（ページを更新しなければ）<br></p1>
  <button type="button" onclick="input()">入力モード</button>
  <button type="button" onclick="conf()">確認モード</button>


  <textarea id="text" cols="30" rows="30"></textarea>
  <script>
      var x=0;
      var words=[],ans=[];
   function input(){

    // インプット
    if(x==0){
      var i,line=[];
      var all=document.getElementById('text').value.replace(/\r\n|\r/g, "\n");
      var lines=all.split('\n');
      for(i=0;i<lines.length;i++){
        line=lines[i].split(" ");
        words[i]=line[0];
        ans[i]=line[1];
      }
      
    alert("単語:"+words+"\n"+"答え:"+ans);
    }

    var point=0,total=0,missword=[],j=0;

    // クイズ
    for(i=0;i<words.length;++i){
      var answer=prompt(words[i]);
      total=total+1;
      if(answer==ans[i]){
        point=point+1;
      }else{
        alert(words[i]+"は「"+ans[i]+"」です");
        missword[j]="\n"+words[i]+" "+ans[i];
        words[j]=words[i];
        ans[j]=ans[i];
        j=j+1;
      }
    }

    // 結果
      alert(total+"問中"+point+"問正解（正答率"+(point/total)*100+"％)");
      alert("間違った問題\n"+missword);
      words.splice(total-point, point);
      ans.splice(total-point,point);
      x=1;
   } 

   function conf(){

    // インプット
    if(x==0){
      var i,line=[];
      var all=document.getElementById('text').value.replace(/\r\n|\r/g, "\n");
      var lines=all.split('\n');
      for(i=0;i<lines.length;i++){
        line=lines[i].split(" ");
        words[i]=line[0];
        ans[i]=line[1];
      }
      
    alert("単語:"+words+"\n"+"答え:"+ans);
    }

    var point=0,total=0,missword=[],j=0;

    // クイズ
    for(i=0;i<words.length;++i){
      answer=confirm(words[i]);
      total=total+1;
      if(answer==true){
        point=point+1;
      }else{
        alert(words[i]+"は「"+ans[i]+"」です");
        missword[j]="\n"+words[i]+" "+ans[i];
        words[j]=words[i];
        ans[j]=ans[i];
        j=j+1;
      }
    }

    // 結果
      alert(total+"問中"+point+"問正解（正答率"+(point/total)*100+"％)");
      alert("間違った問題\n"+missword);
      words.splice(total-point, point);
      ans.splice(total-point,point);
      x=1;




   }

  </script>
  <p1><br><br>例1<br>appraise を評価する<br>adhere(to) を遵守する<br>prosperous 繁栄した<br>compensation 報酬<br>competitive 他に負けない<br>invoice 送り状<br>subtract 控除する<br>excerpt 抜粋<br>bid 入札<br>accomplished 熟達した<br>culinary 料理の<br>decline 辞退する<br>consecutive 連続した<br></p1>
  <p1><br>例2<br>cat ねこ<br>dog いぬ<br>house いえ<br>book ほん<br>apple りんご<br></p1>
</body>
</html>


